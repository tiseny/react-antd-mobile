webpackJsonp([1],{ejGE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),r=n.n(a),i=n("Zx67"),o=n.n(i),c=n("Zrlr"),s=n.n(c),u=n("wxAW"),l=n.n(u),d=n("zwoO"),h=n.n(d),p=n("Pf15"),f=n.n(p),g=n("U7vG"),m=n.n(g),v=n("KSGD"),y=n.n(v),k=n("1cZb"),b=n.n(k),E=n("yF52"),x=n.n(E),_=n("IidI"),w=n.n(_),C=n("LoBt"),R=n.n(C),L=n("ExGt"),I=n.n(L),D=n("2KeS"),S=n("4n+p"),j=(n.n(S),n("k0iI")),P=function(e){function t(e){s()(this,t);var n=h()(this,(t.__proto__||o()(t)).call(this,e));return n.state={pageSize:10},n}return f()(t,e),l()(t,[{key:"componentWillMount",value:function(){this.props.onChangeBreadcrumb([{name:"资源管理"}]),this.props.onChangeButtons([{text:"资源上传",icon:"upload",func:this.handleAddResource.bind(this)}]),this.props.onChangeSearch({searchPlaceHolder:"模糊搜索",searchKeyword:"",searchFunc:this._getList.bind(this,1)})}},{key:"componentDidMount",value:function(){this._getList(1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.resourceList,a=t.resourcePage,r=t.resourceTotal,i=t.pending,o=[{title:"名称",dataIndex:"name"},{title:"类型",dataIndex:"type"},{title:"文件地址",dataIndex:"url"},{title:"描述",dataIndex:"remark"},{title:"操作",key:"actions",width:150,render:function(t,n){return m.a.createElement("span",null,m.a.createElement(I.a,{title:"编辑"},m.a.createElement(w.a,{shape:"circle",icon:"edit",onClick:e.handleEditResource.bind(e,n)})),m.a.createElement(R.a,{title:"删除后不可恢复，确认继续删除吗？",onConfirm:e.handleDeleteResource.bind(e,n)},m.a.createElement(I.a,{title:"删除"},m.a.createElement(w.a,{shape:"circle",style:{marginLeft:10},icon:"delete"}))))}}];return m.a.createElement("div",{className:"modules-page-container has-padding"},m.a.createElement(x.a,{loading:i,pagination:{showQuickJumper:!1,defaultCurrent:a,total:r,onChange:function(t){e._getList(t,"")},showTotal:function(e,t){return t[0]+"-"+t[1]+" / 共计"+e+"个资源"}},rowKey:"id",dataSource:n,columns:o}))}},{key:"handleAddResource",value:function(){this.context.router.push("/resource/detail")}},{key:"handleEditResource",value:function(e){this.context.router.push("/resource/detail/"+e.id)}},{key:"handleDeleteResource",value:function(e){this.props.actions.fetchDeleteResource(e.id,function(e){e.result?b.a.success(e.msg,1.5):b.a.error(e.msg,1.5)})}},{key:"_getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.state.pageSize;this.props.actions.fetchResourceList({page:e,keyword:t,page_size:n},function(e){e.result||b.a.error(e.msg,1.5)})}}]),t}(m.a.PureComponent);P.contextTypes={router:y.a.object.isRequired};var z=function(e){return r()({},e.resource)},A=function(e){return{actions:Object(D.bindActionCreators)(j.a,e)}};t.default=Object(S.connect)(z,A)(P)}});